UPPER(str)	转大写	UPPER('abc') → 'ABC'
LOWER(str)	转小写	LOWER('ABC') → 'abc'
INITCAP(str)	首字母大写	INITCAP('hello world') → 'Hello World'
LTRIM(str [, trim_chars])	左裁剪字符	LTRIM('---ABC','-') → 'ABC'
RTRIM(str [, trim_chars])	右裁剪字符	RTRIM('ABC---','-') → 'ABC'
TRIM(str)	去两端空白或字符	TRIM('-' FROM '---ABC---') → 'ABC'
SUBSTR(str, pos, len)	截取字串	SUBSTR('ABCD',2,2) → 'BC'
INSTR(str, sub [,start][,occurrence])	搜寻子字串位置	INSTR('AABAA','A',1,3) → 4
REPLACE(str, find, replace)	替换字串	REPLACE('ABC','B','X') → 'AXC'
LPAD(str, len, pad)	左填充	LPAD('1',4,'0') → '0001'
RPAD(str, len, pad)	右填充	RPAD('1',4,'0') → '1000'
LENGTH(str)	长度	LENGTH('ABC') → 3

DECLARE
    v_text VARCHAR2(50) := 'hello world';
BEGIN
    DBMS_OUTPUT.PUT_LINE( UPPER(v_text) );
    DBMS_OUTPUT.PUT_LINE( SUBSTR(v_text, 1, 5) );
END;

ABS(n)	绝对值	ABS(-5) → 5
CEIL(n)	向上取整	CEIL(2.1) → 3
FLOOR(n)	向下取整	FLOOR(2.9) → 2
ROUND(n [, decimals])	四舍五入	ROUND(2.345, 2) → 2.35
TRUNC(n [, decimals])	截断	TRUNC(2.345, 2) → 2.34
MOD(a,b)	取余	MOD(10,3) → 1
POWER(a,b)	幂	POWER(2,3) → 8
SQRT(n)	平方根	SQRT(9) → 3

SYSDATE	当前数据库服务器时间	
SYSTIMESTAMP	含时区的精确时间	
ADD_MONTHS(date, n)	加/减月份	ADD_MONTHS(SYSDATE, 1)
MONTHS_BETWEEN(d1, d2)	月份差	
NEXT_DAY(date, weekday)	找出下一个指定星期几	
LAST_DAY(date)	月底日期	
ROUND(date [, fmt])	四舍五入日期	
TRUNC(date [, fmt])	截断日期	

DECLARE
    v_date DATE := SYSDATE;
BEGIN
    DBMS_OUTPUT.PUT_LINE(ADD_MONTHS(v_date, 1));
    DBMS_OUTPUT.PUT_LINE(LAST_DAY(v_date));
END;

TO_CHAR(expr [, fmt])	转换成字符串（格式化常用）
TO_NUMBER(str [, fmt])	转成数字
TO_DATE(str [, fmt])	转成日期
CAST(expr AS type)	类型强制转换
TO_TIMESTAMP(str [, fmt])	转 Timestamp

SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') FROM dual;

NVL(expr1, expr2)	NULL 转换	NVL(NULL, 0) → 0
NVL2(expr, value_if_not_null, value_if_null)	有值/无值选择	
NULLIF(a,b)	相同返回 NULL	
COALESCE(a,b,c...)	返回第一个非 NULL	
DECODE(expr, search, result, ... [, default])	类似 switch-case	
CASE WHEN THEN END	SQL 版流程控制	

SUM(expr)	总和
AVG(expr)	平均
MIN(expr)	最小
MAX(expr)	最大
COUNT(expr)	计数

ROW_NUMBER()	分组排序编号
RANK()	有并列排序
DENSE_RANK()	无缺号排序
LAG(expr, n)	取前 n 行
LEAD(expr, n)	取后 n 行
FIRST_VALUE(expr)	取窗口内第一值
LAST_VALUE(expr)	取最后值

SELECT name,
       salary,
       ROW_NUMBER() OVER (ORDER BY salary DESC) AS rank_no
FROM employees;

DBMS_RANDOM.VALUE(low, high)	随机数
DBMS_RANDOM.STRING(opt, len)	随机字符串

DBMS_UTILITY.GET_TIME	返回 1/100 秒计时器
DBMS_UTILITY.COMMA_TO_TABLE	字串变数组

DBMS_LOB.SUBSTR(clob, len, pos)	取字串
DBMS_LOB.INSTR(clob, pattern)	搜索
DBMS_LOB.APPEND(dest, src)	拼接

MERGE INTO target t
USING source s
ON (t.id = s.id)
WHEN MATCHED THEN 
    UPDATE SET 
        t.value = s.value
WHEN NOT MATCHED THEN
    INSERT (id, value)
    VALUES (s.id, s.value);

UPDATE target t
SET t.value = (SELECT s.value FROM source s WHERE t.id = s.id)
WHERE EXISTS (SELECT 1 FROM source s WHERE t.id = s.id);

INSERT INTO target (id, value)
SELECT s.id, s.value
FROM source s
WHERE NOT EXISTS (SELECT 1 FROM target t WHERE t.id = s.id);

只追加：
INSERT /*+ APPEND */ INTO target
SELECT * FROM source;

合併時做額外業務處理
FOR rec IN (SELECT * FROM source) LOOP
    MERGE INTO target t
    USING (SELECT rec.id AS id, rec.value AS value FROM dual) s
    ON (t.id = s.id)
    WHEN MATCHED THEN
        UPDATE SET t.value = s.value
    WHEN NOT MATCHED THEN
        INSERT (id, value)
        VALUES (s.id, s.value);
END LOOP;
